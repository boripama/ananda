# Intro

Hey everyone, and thanks for watching.

I'm Matthew Thor, and this is Bond Davis, Rick Polidoro and Patrick Gund.

We're here to present to you our project: Ananda, a social web app for endurance athletes.

Ananda's purpose is to connect people who share similar passions and help users find new people to connect with based on their training habits.

Our name is inspired by the chemical compound anandamide, which plays a large role in producing the sensation of a "runner's high," and comes from the Sanskrit word "Ananda" meaning bliss or happiness. We thought this married perfectly with our core mission of finding and nurturing friendships.

----------

# Walkthrough

So how does Ananda work?

1. As a user, I would start by either logging in or creating an account.

1. Once you log in, you're brought to a page showing your name, a feed of your friends' activities, and follower recommendations which are generated by our custom algorithm.

1. You can comment on and like those activities directly from this page.

1. You can also see the details of a single activity or see a user's profile.

1. Me and Cody go way back, so let's follow him.

1. You can also see your totals and manage your account.

1. Lastly, you can upload an activity, which then is displayed on your profile page and for your followers.

----------

# Social and displaying maps

Thanks Bond, now what’s interesting is this aspect of setting up the database relationships between followers, likes, comments, and what-have you.

We solved these challenges with sequelize and postgres but even so this quickly became a complicated task when we sought to display unique sets of information.

Having quick access to all of a user’s followers for instance gives us flexibility to incorporate this with our recommendation engine.

Implementing a mapping system also proved to be a significant challenge because as we learned how to interpret our GPS data we had to discover what this information looks like and how to display this on a map.

We looked into Google Maps, however we found the complex geospatial functionality we required was readily available with the Mapbox API.

----------

# GPX uploads

So, how do our users get their activities on our site?

Ideally we would have used something like the Garmin API, but we weren't interested in the $5000 pricetag to use it.

So we decided to import GPX files--which is a standard format for GPS activities-- but we also didn't want to have to store them on our server.

Our solution was to send the GPX file over HTTP and then parse and store the information in our Postgres database.

GPX files are just a massive collection of "trackpoints," which have a coordinate pair and a timestamp. In order to avoid storing huge arrays of data, our server converts this data to a polyline string, as you can see here, as well as calculates relevant metadata like center point, start/end time, pace and distance.

Getting that data allows us to easily display the activites, and is also critical to making friend recommendations.

----------

# Recommendations

Determining follower recommendations is a complex task.
The difficulty that we faced is that we have a vast amount of data to work with.

Each individual run is comprised of thousands of gps points and other meta data.

Each user can potentially have thousands of runs, and our site may have thousands of users.

In order to determine if two users should be recommended as followers, we have to sort through all of this data in a timely manner, to prevent our website from crawling to a halt.

As a runner I may have 100 runs, but 90 of those I may be running the same route, at the same pace, etc. By using a caching mechanism, we could effectively transform those 100 runs into 11 runs for future comparison.

We compare an individual users runs against their other runs, and if they match each other closely enough, only one is stored in the cache. Then, when a new activity is uploaded, we only need to compare that activity to the existing cache, not every run for the user.

We are then able to compare two separate user's cache against each other and determine if they share similar characteristics, and recommend them to one another if they are a match.

By using this methodology, we can compare our entire database in a fraction of a second, and as you can see in real time, a recommendation is being performed for a new user.

----------

# Conclusion

And that's Ananda. Check it out at Ananda dash runs dot heroku app dot com to start tracking your own runs and making new friends. Thanks for listening, and happy running!
